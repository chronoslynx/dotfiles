#!/usr/bin/env bash

#- mou 1.0
#- All Rights Reversed 2013 Tim Swihart

## Open the specified file in Mou.app
## Usage: mou FILE_NAME...
##
##       -h     Show help options.
##       -v     Print version info.

help=$(grep "^## " "${BASH_SOURCE[0]}" | cut -c 4-)
version=$(grep "^#- "  "${BASH_SOURCE[0]}" | cut -c 4-)

opt_h() {
  echo "$help"
}

opt_v() {
    echo "$version"
}

if [[ -z $1 ]]; then
    opt_h
    exit 1
fi

while getopts "hv" opt; do
    eval "opt_$opt"
done

if [[ -n "$1" && ! -f $1 ]]; then
    touch $1;
fi

osascript <<EOF
tell application "Mou"
    open "$(pwd)/$1"
end tell
EOF
