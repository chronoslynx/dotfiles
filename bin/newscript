#!/usr/bin/env bash

#- newscript 1.0
#- All Rights Reversed 2013 Tim Swihart
#- Help/version ideas via <http://blog.saunter.org/blog/2013/03/23/include-usage-information-with-scripts/>

## Usage: newscript script_name...
##
##       -h     Show help options.
##       -v     Print version info.

help="Usage: newscript script_name"
version=0.1

opt_h() {
    echo "$help"
}

opt_v() {
    echo "$version"
}

while getopts "hv" opt; do
    eval "opt_$opt"
done

if [[ $# -lt 1 ]]; then
    opt_h
    exit
fi

cat <<EOF > $HOME/bin/$1
#!/usr/bin/env bash

#- $1 0.1
#- Nietzsche Public License v0.6
#- 
#- Copyright $(date +%Y) Tim Swihart
#- 
#- Copyright, like God, is dead.  Let its corpse serve only to guard against its
#- resurrection.  You may do anything with this work that copyright law would
#- normally restrict so long as you retain the above notice(s), this license, and
#- the following misquote and disclaimer of warranty with all redistributed
#- copies, modified or verbatim.  You may also replace this license with the Open
#- Works License, available at the http://owl.apotheon.org website.
#- 
#-     Copyright is dead.  Copyright remains dead, and we have killed it.  How
#-     shall we comfort ourselves, the murderers of all murderers?  What was
#-     holiest and mightiest of all that the world of censorship has yet owned has
#-     bled to death under our knives: who will wipe this blood off us?  What
#-     water is there for us to clean ourselves?  What festivals of atonement,
#-     what sacred games shall we have to invent?  Is not the greatness of this
#-     deed too great for us?  Must we ourselves not become authors simply to
#-     appear worthy of it?
#-                                     - apologies to Friedrich Wilhelm Nietzsche
#- 
#- No warranty is implied by distribution under the terms of this license.

## Usage: $1 [options] <argv>...
##
##       -h     Show help options.
##       -v     Print version info.

help=\$(grep "^## " "\${BASH_SOURCE[0]}" | cut -c 4-)
version=\$(grep "^#- "  "\${BASH_SOURCE[0]}" | cut -c 4-)

opt_h() {
    echo "\$help"
}

opt_v() {
    echo "\$version"
}

while getopts "hv" opt; do
    eval "opt_\$opt"
done
EOF

chmod +x $HOME/bin/$1
