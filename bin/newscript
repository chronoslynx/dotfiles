#!/usr/bin/env bash

#- newscript 1.0
#- Help/version ideas via <http://blog.saunter.org/blog/2013/03/23/include-usage-information-with-scripts/>

## Usage: newscript script_name...
##
##       -h     Show help options.
##       -v     Print version info.

help="Usage: newscript script_name"
version=0.1

opt_h() {
    echo "$help"
}

opt_v() {
    echo "$version"
}

while getopts "hv" opt; do
    eval "opt_$opt"
done

if [[ $# -lt 1 ]]; then
    opt_h
    exit
fi

cat <<EOF > $HOME/bin/$1
#!/usr/bin/env bash

#- $1 0.1
#- All Rights Reversed $(date +%Y) Tim Swihart

## Usage: $1 [options] <argv>...
##
##       -h     Show help options.
##       -v     Print version info.

help=\$(grep "^## " "\${BASH_SOURCE[0]}" | cut -c 4-)
version=\$(grep "^#- "  "\${BASH_SOURCE[0]}" | cut -c 4-)

opt_h() {
    echo "\$help"
}

opt_v() {
    echo "\$version"
}

while getopts "hv" opt; do
    eval "opt_\$opt"
done
EOF

chmod +x $1
